本文所有的内容都是在工作之余整理。主要是自己知识区的盲点。为了来年做好准备。

# Java

1. 快速失败 (fail-fast) 和安全失败 (fail-safe) 的区别是什么？
    fail-fast :ConcurrentModificationException -> foreach remove-> 先记录一下，每次迭代判断 -> HashMap
    单线程的迭代删除，多线程的修改
    fail-safe: 对集合的修改是在copy的基础上。CopyOnWirteArrayList, ConcurrentHashMap
    fail-fast: 迭代删除 ， java8 removeIf map.keySet().removeIf();

2. HashMap
    getNode first判断 -> hash,key,value校验 -> is TreeNode ? TreeSearch : Next do while
    Node[] ; hash &(length-1) ; put new Node change val
    红黑树 logN 
    对于put操作，如果Key对应的数组元素为null，则通过CAS操作将其设置为当前值。如果Key对应的数组元素（链表表头或树的根元素）不为null，则对该元素使用synchronized关键字申请锁，然后进行操作。如果该put操作使得当前链表长度超过一定阈值，则将该链表转换为树，从而提高寻址效率

    将链表转换成红黑树前判断，如果当前数组的长度小于 64，那么会选择进行数组扩容，而不是转换为红黑树
    hashmap转红黑树的两个条件:一个是链表长度到8,一个是数组长度到64.

3. HashSet 和 TreeSet 有什么区别
   hashSet :无序
   treeSet：有序 Compartor
   LinkedHashSet是一种有序的Set集合，即其元素的存入和输出的顺序是相同的
4. Iterator 和 ListIterator 的区别是什么？
5. 序列化 与反序列化的大坑，参考我的 core/序列化与反序列化.md
6. TreeSet 底层也是 TreeMap. 通过equals去重。 HashSet 底层是 HashMap
7. 下面这条语句一共创建了多少个对象：String s="a"+"b"+"c"+"d";
```
        对于如下代码：
        String s1 = "a";
        String s2 = s1 + "b";
        String s3 = "a" + "b";
        System.out.println(s2 == "ab");
        System.out.println(s3 == "ab");
        第一条语句打印的结果为false，第二条语句打印的结果为true，这说明javac编译可以对字符串常量直接相加的表达式进行优化，不必要等到运行期再去进行加法运算处理，而是在编译时去掉其中的加号，直接将其编译成一个这些常量相连的结果。
        题目中的第一行代码被编译器在编译时优化后，相当于直接定义了一个”abcd”的字符串，所以，上面的代码应该只创建了一个String对象。写如下两行代码，
                String s ="a" + "b" +"c" + "d";
                System.out.println(s== "abcd");
        最终打印的结果应该为true。
```
8. 当try和finally里都有return时，会忽略try的return，而使用finally的return。finally没有return时候，将 try return的存储起来，然后最后return回去。