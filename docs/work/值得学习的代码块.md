
## 1. 集合的处理
```java
    /**
     *  向某个list添加数据
     * @param list 目标list
     * @param data 待添加的data
     * @param isSame 是否相同
     * @param <T> 数据类型
     * @return
     */
    public static <T>List<T> addTToList(List<T> list, T data, Predicate<T> isSame) {
        list.removeIf(isSame);
        list.add(data);
        return list;
    }
```

## 2. Stream 流 anyMatch
```java
boolean flag = list.stream().anyMatch(id -> id == targetId);
```

## 3. 确保某个值大于1000
```java
id = (1000/value +1)*value;
```

## 4. Builder方式

```java
class Wrap {
Builder builder
public static class Builder {
    int id;
    public Builder () {

    }
    public Builder setRoleId(int id) {
        this.id = id;
        return this;
    }
public Wrap build() {retturn new Wrap(this)}
}
}
```

## 5. MethodHandler 反射方法的高级用法
```java
    private void test() throws Exception{
        Map<Class<?>, MethodHandle> map = new HashMap<>();
        MethodHandles.Lookup lookup = MethodHandles.lookup();
        Class<?> cls = P1.class; // P1 为P的子类
        for (Method method : cls.getDeclaredMethods()) {
            method.setAccessible(true);
            map.put(method.getParameterTypes()[0], lookup.unreflect(method));
        }
    }

    private void use() {
        MethodHandle method = map.get(xxx.class);
        method.invoke();
    }
```
## 6. Excutor的用法

```java
static ScheduleThreadPoolExecutor delayExecutor ;
static {
    delayExecutor = new ScheduledThreadPoolExecutor(1, r->{
            Thread t = new Thread(r, "mythread");
            t.setDaemon(true);
            return t;
    });
}

delayExecutor.schedule(()->{

}, delayMs, TimeUnit.Second);
```

## 7. Objects.equals 方法。

## 反射

```java
// 测试最好不同的类，方便观察private的
public class TestAA {
    public static void main(String[] args) throws Exception{
        Class cls = Class.forName("com.example.reflect.TestClass");
        TestClass t = (TestClass) cls.newInstance(); // 通过newInstance 获取对象
        Field[] fields = cls.getDeclaredFields();    // 获取class 的所有的属性值
        for (Field f : fields) {
            System.out.println(f.getName()); // 输出属性值名称
            f.setAccessible(true);           // 设置可访问 可修改
            if (f.getName().equals("age")) {
                int a = f.getInt(t);         // getAge 值
                System.out.println(a);       // age =14
                f.set(t, 18);                // 修改 private 的属性
            }
        }

        Method[] methods = cls.getDeclaredMethods(); // 获取所有的方法 包括private
        for (Method m : methods) {
            m.setAccessible(true); // 设置可访问
            if (m.getName().equals("say")) {
                m.invoke(t,"hou"); // 调用t 对象的方法，传参数
            }
        }
        System.out.println(t.getAge());   // 输出我们上次修改过的age = 18
    }
}
// 
public class TestClass {
    private int age = 14;
    private void say(String name) {
        System.out.println(name+"say" +age);
    }
    public int getAge() {
        return age;
    }
}
```

## Consumer的使用
```java
public class TestConsumer<T> {
    Map<Integer, Consumer<T>> map = new HashMap<>();
    public static void main(String[] args) {
        TestConsumer<String> foo = new TestConsumer<>();
        foo.on(1, foo::say);
        foo.on(2, foo::play); // 注册两个方法

        foo.use(2, "haha"); // 输出哈哈

    }
    public void on(int type, Consumer<T> consumer) {
        map.putIfAbsent(type, consumer); // 将两个方法存储到map
    }
    public void use(int type, T name) {
        Consumer<T> consumer = map.get(type);
        if (null != consumer) { // 处理使用
            consumer.accept(name);
        }
    }
    public void say(T name) {
        System.out.println("say"+name);
    }
    public void play(T name) {
        System.out.println("play"+name);
    }
}

```

## Supplier的优秀用法

```java
public class TestSupplier<T> {
    private Supplier<T> factory; // 定义new 对象的工厂
    public TestSupplier(Supplier<T> supplier) {
        this.factory = supplier;
    }

    public static void main(String[] args) {
        TestSupplier<P> test = new TestSupplier<>(P::new); // 构造方法中传入方法
        P p = test.getOne(); // 生成P的对象
        p.name = "hou";
        System.out.println(p.name);
    }
    public T getOne() {
        return this.factory.get();
    }
}
class P {
    String name;
}
```

## Java 8 Sort
```java
        List<Integer> list = new ArrayList<>();
        list.add(2);
        list.add(1);
        list.add(3);
        Collections.sort(list, (a, b)->{
            return b-a;
        });
        list.sort((a, b)->{return a-b;}); // 这种方式更好
        list.forEach(System.out::println); // 3 2 1
        list.stream().sorted((a, b)->{return a-b;}).forEach(System.out::println); // 1 2 3 不更改元数据
        list.forEach(System.out::println); // 3 2 1
```

## Consumer 使用
```java
public class Member {
    private String name;
    private int age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Member{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
}
public class Faction {
    public List<Member> members = new ArrayList<>();

    public void foreachMember(Consumer<Member> consumer) {
        members.forEach(consumer::accept);
    }

    public static void main(String[] args) {
        Faction faction = new Faction();
        Member member = new Member();
        member.setName("xiaoming");
        member.setAge(13);
        faction.members.add(member);
        // begin
        faction.foreachMember(e->{
            e.setAge(15);
        });
        faction.foreachMember(System.out::println);
    }
}

```